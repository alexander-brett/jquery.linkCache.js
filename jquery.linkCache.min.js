(function(e){e.fn.linkCache=function(t){var n=this;var r={progressCallback:function(){e(this).click(function(t){t.preventDefault();if(!e(t.target).is("."+i.activeLinkClass)){e("."+i.activeLinkClass).removeClass(i.activeLinkClass);e(t.target).addClass(i.activeLinkClass);e(i.contentSelector).replaceWith(e(t.target).data("content")).remove()}})},completeCallback:function(){},contentSelector:"#content",activeLinkClass:"current-menu-item"};var i=e.extend({},r,t);var s={numberToLoad:n.filter("a").length,numberLoaded:0,doCallback:function(){s.numberLoaded++;i.progressCallback.call(this);s.numberLoaded==s.numberToLoad?i.completeCallback.call(n):null},loadLinkContent:function(){var t=this;e(t).data("loaded")==1?s.doCallback.call(t):e.get(e(t).attr("href"),function(n){e(t).data({loaded:1,content:e(n).find(i.contentSelector)[0]||e(n).filter(i.contentSelector)[0]});s.doCallback.call(t)})}};this.filter("a").each(function(){s.loadLinkContent.call(this)})}})(jQuery)
